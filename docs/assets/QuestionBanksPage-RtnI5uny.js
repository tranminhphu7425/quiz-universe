import{r,u as ge,j as e,m as N,L as h,B as k,F as X,k as ue,U as T,q as pe,s as be,o as fe,Q as je,H as q}from"./index-Ckj9bWBj.js";import{f as M}from"./favoriteApi-D787c8C0.js";import{C as Y,E as ve,a as we}from"./ellipsis-vertical-DjrlC4j6.js";import{G as Ne,L as ke,A as ye,a as Ce}from"./list-nwUb1PjD.js";import{G as B}from"./globe-BsUgk394.js";import{L as A}from"./lock-DKVzez_6.js";import{D as Se}from"./download-CQZyU_t2.js";import{C as Ie}from"./calendar-DznMZPQc.js";import{E as Z}from"./eye-BkWUsXqa.js";import{F as U}from"./funnel-OMGQf8Pv.js";import{S as Te}from"./search-D0GRy-D1.js";import{C as J}from"./clock-JBPROvzn.js";function He(){const[s,o]=r.useState(""),[x,p]=r.useState("all"),[b,m]=r.useState("all"),[d,ee]=r.useState(!1),[y,te]=r.useState("all"),[Fe,O]=r.useState(null),[se,V]=r.useState(!0),[G,Q]=r.useState([]),[g,_]=r.useState("grid"),[i,u]=r.useState("date-desc"),[n,f]=r.useState(new Set),[H,ae]=r.useState(!1),[C,le]=r.useState(!1);localStorage.getItem("auth_token");const[j,L]=r.useState(1),F=6,re=["all","MCQ","TRUE_FALSE","FILL_BLANK"],ie=["all","easy","medium","hard"],ne=[{value:"all",label:"Tất cả",icon:Z},{value:"PUBLIC",label:"Công khai",icon:B,color:"text-emerald-600"},{value:"ORG",label:"Nội bộ",icon:T,color:"text-blue-600"},{value:"PRIVATE",label:"Riêng tư",icon:A,color:"text-amber-600"}],[$,z]=r.useState(new Set),{user:S,logout:$e}=ge(),de=t=>{["name-asc","name-desc","date-asc","date-desc","questions-asc","questions-desc","visibility"].includes(t)?u(t):u("date-desc")},E=async t=>{const a=$.has(t);if(S)try{a?(await M.removeFavoriteQuestionBank(t),z(l=>{const w=new Set(l);return w.delete(t),w})):(await M.addFavoriteQuestionBank(t),z(l=>new Set(l).add(t)))}catch(l){console.error("Lỗi khi cập nhật yêu thích",l)}},W=t=>{f(a=>{const l=new Set(a);return l.has(t)?l.delete(t):l.add(t),l})},K=()=>{n.size===c.length?f(new Set):f(new Set(c.map(t=>t.bankId)))},I=()=>{f(new Set)};r.useEffect(()=>{(async()=>{try{if(!S)return;const a=await M.getFavoriteQuestionBanks();z(new Set(a.map(l=>l.bankId)))}catch(a){console.error(a)}})()},[]);async function ce(){V(!0),O(null),(async()=>{try{const t=await je.getAll();Q(t.content)}catch(t){if(t?.name==="AbortError")return;O("Không thể lấy dữ liệu từ API. Đang dùng dữ liệu cục bộ!");const a=await fetch("/quiz-universe/data/questionBanks.json");Q(await a.json())}finally{V(!1)}})()}r.useEffect(()=>{ce()},[]);const c=r.useMemo(()=>{let t=G.filter(a=>{const l=R(s);return!(l&&!R(a.name).includes(l)&&!R(a.description||"").includes(l)||y!=="all"&&a.visibility!==y||d&&a.visibility!=="PUBLIC")});return t.sort((a,l)=>{switch(i){case"name-asc":return a.name.localeCompare(l.name);case"name-desc":return l.name.localeCompare(a.name);case"date-asc":return new Date(a.createdAt).getTime()-new Date(l.createdAt).getTime();case"date-desc":return new Date(l.createdAt).getTime()-new Date(a.createdAt).getTime();case"questions-asc":return(a.questionCount||0)-(l.questionCount||0);case"questions-desc":return(l.questionCount||0)-(a.questionCount||0);case"visibility":const w={PUBLIC:1,ORG:2,PRIVATE:3};return(w[a.visibility]||4)-(w[l.visibility]||4);default:return 0}}),t},[s,G,y,d,i]);function R(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}const P=Math.max(1,Math.ceil(c.length/F)),oe=c.slice((j-1)*F,j*F),v=t=>a=>{t(a),L(1),f(new Set)},xe=r.useMemo(()=>encodeURIComponent(`
        <svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160' fill='none'>
          <g stroke='#10b981' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
            <path d='M28 36h40a8 8 0 018 8v44H36a8 8 0 01-8-8V36z' opacity='0.7'/>
            <path d='M28 52h48' opacity='0.6'/>
            <rect x='96' y='28' width='36' height='28' rx='4' />
            <path d='M100 36h18M100 44h18' opacity='0.6'/>
          </g>
        </svg>
      `),[]),me=async()=>{for(const t of n)await E(t);I()},D=async t=>{console.log(`Change ${n.size} banks to ${t}`),I()},he=async()=>{console.log(`Export ${n.size} banks`),I()};return e.jsxs("div",{className:"relative min-h-screen bg-slate-50 dark:bg-slate-950",children:[e.jsxs("section",{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-400\r
                      dark:from-gray-900 dark:via-gray-800 dark:to-gray-900`}),e.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-y-0 left-0 w-[120%] md:w-full opacity-10 dark:opacity-[0.15]",style:{backgroundImage:`url("data:image/svg+xml;utf8,${xe}")`,backgroundRepeat:"repeat",backgroundSize:"160px 160px",maskImage:"radial-gradient(1200px 400px at left center, #000 70%, transparent 100%)",WebkitMaskImage:"radial-gradient(1200px 400px at left center, #000 70%, transparent 100%)"}}),e.jsx("div",{className:"pointer-events-none absolute z-0 -left-24 -top-24 h-72 w-72 rounded-full bg-white/10 blur-2xl dark:bg-emerald-400/20"}),e.jsx("div",{className:"pointer-events-none absolute z-0 -right-16 top-10 h-64 w-64 rounded-full bg-white/10 blur-2xl dark:bg-purple-400/20"}),e.jsxs(N.div,{className:"relative z-10 text-center mx-auto max-w-6xl px-6 py-20",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center ",children:[e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("h1",{className:"text-3xl font-black leading-tight text-white text-center lg:text-left",children:"Ngân hàng câu hỏi"}),e.jsx("p",{className:"mt-1 text-white/90 dark:text-gray-300 text-center lg:text-left",children:"Tìm kiếm, lọc theo môn/chương/độ khó/loại. Tạo đề từ nhiều nguồn."})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-center w-full lg:w-auto",children:[e.jsxs(h,{to:"/question_bank/create",className:"inline-flex items-center gap-2 rounded-full bg-yellow-400 px-5 py-2 text-sm font-semibold text-emerald-950 shadow hover:brightness-105",children:[e.jsx(Y,{className:"h-4 w-4"})," Thêm bộ câu hỏi mới"]}),e.jsxs(h,{to:"/subjects",className:"inline-flex items-center gap-2 rounded-full bg-red-400 px-5 py-2 text-sm font-semibold text-emerald-950 shadow hover:brightness-105",children:[e.jsx(k,{className:"h-4 w-4"})," Hiển thị tất cả các môn học"]})]})]}),e.jsx(X,{distance:12,duration:7,className:"pointer-events-none absolute top-16 left-8",children:e.jsx("div",{className:"rounded-xl bg-gradient-to-br from-amber-300 to-rose-300 px-3 py-1 shadow-lg -rotate-6",children:e.jsx("span",{className:"text-xs font-black text-rose-700",children:"QUESTIONS"})})}),e.jsx(X,{distance:10,duration:6,className:"pointer-events-none absolute top-16 right-10",children:e.jsx("div",{className:"rounded-full bg-gradient-to-br from-purple-400 to-indigo-400 p-3 shadow-xl rotate-12",children:e.jsx(k,{className:"h-4 w-4 text-white"})})})]})]}),e.jsx("div",{className:"sticky mb-5 top-12 z-20 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-b border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>_("grid"),className:`p-2 rounded-md transition-colors ${g==="grid"?"bg-white dark:bg-slate-600 shadow-sm":"hover:bg-white/50 dark:hover:bg-slate-600/50"}`,title:"Chế độ lưới",children:e.jsx(Ne,{className:`h-4 w-4 ${g==="grid"?"text-emerald-600":"text-slate-500"}`})}),e.jsx("button",{onClick:()=>_("list"),className:`p-2 rounded-md transition-colors ${g==="list"?"bg-white dark:bg-slate-600 shadow-sm":"hover:bg-white/50 dark:hover:bg-slate-600/50"}`,title:"Chế độ danh sách",children:e.jsx(ke,{className:`h-4 w-4 ${g==="list"?"text-emerald-600":"text-slate-500"}`})})]}),n.size>0&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.size===c.length,onChange:K,className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[n.size," mục đã chọn"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:me,className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm bg-amber-100 text-amber-700 hover:bg-amber-200 dark:bg-amber-900/30 dark:text-amber-400",title:"Thêm vào yêu thích",children:[e.jsx(ue,{className:"h-3 w-3"}),"Yêu thích"]}),e.jsxs("button",{onClick:()=>ae(!H),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400",children:[e.jsx(ve,{className:"h-3 w-3"}),"Thao tác"]}),H&&e.jsxs("div",{className:"absolute mt-10 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 p-2 z-30",children:[e.jsxs("button",{onClick:()=>D("PUBLIC"),className:"flex items-center gap-2 px-3 py-2 w-full text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:[e.jsx(B,{className:"h-4 w-4 text-emerald-600"}),"Đặt công khai"]}),e.jsxs("button",{onClick:()=>D("ORG"),className:"flex items-center gap-2 px-3 py-2 w-full text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:[e.jsx(T,{className:"h-4 w-4 text-blue-600"}),"Đặt nội bộ"]}),e.jsxs("button",{onClick:()=>D("PRIVATE"),className:"flex items-center gap-2 px-3 py-2 w-full text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:[e.jsx(A,{className:"h-4 w-4 text-amber-600"}),"Đặt riêng tư"]}),e.jsxs("button",{onClick:he,className:"flex items-center gap-2 px-3 py-2 w-full text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:[e.jsx(Se,{className:"h-4 w-4"}),"Xuất"]})]}),e.jsx("button",{onClick:I,className:"px-3 py-1.5 text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400",children:"Bỏ chọn"})]})]})]}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-6",children:e.jsxs("div",{className:"flex items-center justify-between md:justify-start gap-4",children:[e.jsx("div",{className:"md:hidden flex-1",children:e.jsxs("select",{value:i,onChange:t=>de(t.target.value),className:"w-full px-3 py-1.5 rounded-lg text-sm bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400 transition-colors",children:[e.jsx("option",{value:"name-asc",children:"Tên (A → Z)"}),e.jsx("option",{value:"name-desc",children:"Tên (Z → A)"}),e.jsx("option",{value:"date-desc",children:"Ngày (mới nhất)"}),e.jsx("option",{value:"date-asc",children:"Ngày (cũ nhất)"}),e.jsx("option",{value:"questions-desc",children:"Số câu (nhiều nhất)"}),e.jsx("option",{value:"questions-asc",children:"Số câu (ít nhất)"}),e.jsx("option",{value:"visibility",children:"Quyền xem"})]})}),e.jsxs("div",{className:"hidden md:flex md:items-center md:gap-6",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Sắp xếp:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>u(i==="name-asc"?"name-desc":"name-asc"),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${i.startsWith("name")?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400"}`,children:[i==="name-asc"?e.jsx(ye,{className:"h-3 w-3"}):e.jsx(Ce,{className:"h-3 w-3"}),"Tên"]}),e.jsxs("button",{onClick:()=>u(i==="date-desc"?"date-asc":"date-desc"),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${i.startsWith("date")?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400"}`,children:[e.jsx(Ie,{className:"h-3 w-3"}),"Ngày ",i==="date-desc"?"↓":"↑"]}),e.jsxs("button",{onClick:()=>u(i==="questions-desc"?"questions-asc":"questions-desc"),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${i.startsWith("questions")?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400"}`,children:[e.jsx(k,{className:"h-3 w-3"}),"Số câu ",i==="questions-desc"?"↓":"↑"]}),e.jsxs("button",{onClick:()=>u("visibility"),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${i==="visibility"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400"}`,children:[e.jsx(Z,{className:"h-3 w-3"}),"Quyền xem"]})]})]}),e.jsxs("button",{onClick:()=>le(!C),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors ${C?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-400"}`,children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Bộ lọc"}),C?e.jsx(we,{className:"h-3 w-3"}):e.jsx(pe,{className:"h-3 w-3"})]})]})})]})})}),e.jsxs("div",{className:"relative z-10 mx-auto max-w-7xl px-6 pb-20",children:[C&&e.jsx(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsxs(N.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},className:" mb-5 rounded-2xl border border-white/20 bg-white/10 p-4 backdrop-blur-md dark:border-gray-700 dark:bg-gray-800/50",children:[e.jsxs("div",{className:"grid gap-3 md:grid-cols-5",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-white/90 dark:text-gray-200",children:"Tìm kiếm"}),e.jsxs("div",{className:"flex items-center gap-2 rounded-xl bg-white/80 px-3 py-2 ring-1 ring-black/10 focus-within:ring-2 focus-within:ring-emerald-400 dark:bg-slate-900/70 dark:ring-white/10",children:[e.jsx(Te,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-300"}),e.jsx("input",{value:s,onChange:t=>v(o)(t.target.value),placeholder:"Từ khóa: tên, mô tả, môn học…",className:"w-full bg-transparent p-1 text-sm text-gray-800 placeholder:text-gray-500 focus:outline-none dark:text-gray-100 dark:placeholder:text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-white/90 dark:text-gray-200",children:"Quyền xem"}),e.jsx("select",{value:y,onChange:t=>v(te)(t.target.value),className:"w-full rounded-xl bg-white/80 px-3 py-2 text-sm text-gray-800 ring-1 ring-black/10 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:bg-slate-900/70 dark:text-gray-100 dark:ring-white/10",children:ne.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-white/90 dark:text-gray-200",children:"Loại câu hỏi"}),e.jsx("select",{value:b,onChange:t=>v(m)(t.target.value),className:"w-full rounded-xl bg-white/80 px-3 py-2 text-sm text-gray-800 ring-1 ring-black/10 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:bg-slate-900/70 dark:text-gray-100 dark:ring-white/10",children:re.map(t=>e.jsx("option",{value:t,children:t==="all"?"Tất cả":t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-white/90 dark:text-gray-200",children:"Độ khó"}),e.jsx("select",{value:x,onChange:t=>v(p)(t.target.value),className:"w-full rounded-xl bg-white/80 px-3 py-2 text-sm text-gray-800 ring-1 ring-black/10 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:bg-slate-900/70 dark:text-gray-100 dark:ring-white/10",children:ie.map(t=>e.jsx("option",{value:t,children:t==="all"?"Tất cả":t},t))})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:t=>v(ee)(t.target.checked),className:"h-4 w-4 rounded border-white/20 bg-white/20 text-emerald-500 focus:ring-emerald-400 dark:border-gray-600"}),"Chỉ hiển thị ngân hàng đã kiểm duyệt"]}),c.length>0&&e.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:n.size===c.length,onChange:K,className:"h-4 w-4 rounded border-white/20 bg-white/20 text-emerald-500 focus:ring-emerald-400 dark:border-gray-600"}),"Chọn tất cả"]})]}),e.jsxs("div",{className:"hidden items-center gap-2 text-xs text-white/90 dark:text-gray-300 md:flex",children:[e.jsx(U,{className:"h-4 w-4"})," ",c.length," kết quả",n.size>0&&e.jsxs("span",{className:"ml-2 px-2 py-1 rounded-full bg-emerald-100 text-emerald-800 text-xs font-medium",children:[n.size," đã chọn"]})]})]})]})}),se?e.jsx(Ae,{}):c.length===0?e.jsx(Le,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:g==="grid"?"grid gap-4 sm:grid-cols-2 lg:grid-cols-3":"space-y-4",children:oe.map(t=>g==="grid"?e.jsx(qe,{bank:t,isFavorite:$.has(t.bankId),isSelected:n.has(t.bankId),onToggleFavorite:()=>E(t.bankId),onToggleSelect:()=>W(t.bankId),userRole:S?.role},t.bankId):e.jsx(Be,{bank:t,isFavorite:$.has(t.bankId),isSelected:n.has(t.bankId),onToggleFavorite:()=>E(t.bankId),onToggleSelect:()=>W(t.bankId),userRole:S?.role},t.bankId))}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>L(t=>Math.max(1,t-1)),disabled:j===1,className:"inline-flex items-center gap-1 rounded-full bg-white/10 px-3 py-1.5 text-sm text-white ring-1 ring-white/20 disabled:opacity-50 dark:bg-white/5 dark:ring-white/10",children:[e.jsx(be,{className:"h-4 w-4"})," Trước"]}),e.jsxs("span",{className:"text-sm text-white/90 dark:text-gray-300",children:["Trang ",j,"/",P]}),e.jsxs("button",{onClick:()=>L(t=>Math.min(P,t+1)),disabled:j===P,className:"inline-flex items-center gap-1 rounded-full bg-white/10 px-3 py-1.5 text-sm text-white ring-1 ring-white/20 disabled:opacity-50 dark:bg-white/5 dark:ring-white/10",children:["Sau ",e.jsx(fe,{className:"h-4 w-4"})]})]})]})]})]})}function qe({bank:s,isFavorite:o,isSelected:x,onToggleFavorite:p,onToggleSelect:b,userRole:m}){const d={PUBLIC:{icon:B,color:"text-emerald-600",bg:"bg-emerald-100"},ORG:{icon:T,color:"text-blue-600",bg:"bg-blue-100"},PRIVATE:{icon:A,color:"text-amber-600",bg:"bg-amber-100"}}[s.visibility];return e.jsxs(N.div,{initial:{opacity:0,y:18},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{type:"spring",stiffness:160,damping:16},className:`flex flex-col justify-between relative rounded-xl border ${x?"border-emerald-400 dark:border-emerald-500 ring-2 ring-emerald-200 dark:ring-emerald-500/30":"border-emerald-100/60 dark:border-slate-800"} bg-white p-4 shadow-lg transition dark:bg-slate-900`,children:[e.jsxs("div",{className:"grow flex flex-col",children:[e.jsxs("div",{children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("input",{type:"checkbox",checked:x,onChange:b,className:"h-5 w-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"})}),e.jsx("div",{className:"mb-2 flex flex-col items-start justify-between gap-3",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md ${d.bg} px-2 py-0.5 text-xs font-semibold ${d.color}`,children:[e.jsx(d.icon,{className:"h-3 w-3"}),s.visibility==="PUBLIC"?"Công khai":s.visibility==="ORG"?"Nội bộ":"Riêng tư"]}),s.questionCount>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:[e.jsx(k,{className:"h-3 w-3"}),s.questionCount," câu"]})]}),e.jsx("h3",{className:"mt-1 text-base font-bold text-emerald-900 dark:text-emerald-200",children:s.name})]})})]}),e.jsxs("div",{className:"flex flex-col grow justify-between",children:[s.description?e.jsx("p",{className:"line-clamp-3 text-sm text-gray-700 dark:text-gray-300 mb-3",children:s.description}):e.jsx("p",{className:"text-sm italic text-gray-500 dark:text-gray-400 mb-3",children:"Chưa có mô tả"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-medium",children:"Môn:"}),e.jsx("span",{className:"truncate",children:s.subjectName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-medium",children:"Người tạo:"}),e.jsx("span",{className:"truncate",children:s.creatorName})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 dark:border-slate-800 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-900/70 dark:text-slate-300/70",children:[e.jsx(J,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString("vi-VN")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p,className:"transition hover:scale-105 active:scale-95","aria-label":o?"Bỏ yêu thích":"Thêm vào yêu thích",children:o?e.jsx(q,{className:"w-5 h-5 text-red-500 fill-red-500"}):e.jsx(q,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[(m==="admin"||m==="editor")&&e.jsx(h,{to:`/questions/question_bank/${s.bankId}/edit`,className:"inline-flex items-center gap-1 rounded-lg bg-red-400 px-2 py-1 text-xs font-semibold text-emerald-950 shadow hover:brightness-105",children:"Sửa"}),e.jsx(h,{to:`/questions/question_bank/${s.bankId}`,className:"inline-flex items-center gap-1 rounded-lg bg-yellow-400 px-2 py-1 text-xs font-semibold text-emerald-950 shadow hover:brightness-105",children:"Xem"})]})]})]})]})}function Be({bank:s,isFavorite:o,isSelected:x,onToggleFavorite:p,onToggleSelect:b,userRole:m}){const d={PUBLIC:{icon:B,color:"text-emerald-600",bg:"bg-emerald-100"},ORG:{icon:T,color:"text-blue-600",bg:"bg-blue-100"},PRIVATE:{icon:A,color:"text-amber-600",bg:"bg-amber-100"}}[s.visibility];return e.jsx(N.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},whileHover:{x:4},className:`relative rounded-xl border ${x?"border-emerald-400 dark:border-emerald-500 ring-2 ring-emerald-200 dark:ring-emerald-500/30":"border-emerald-100/60 dark:border-slate-800"} bg-white p-4 shadow-sm transition dark:bg-slate-900`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"checkbox",checked:x,onChange:b,className:"h-5 w-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md ${d.bg} px-2 py-0.5 text-xs font-semibold ${d.color}`,children:[e.jsx(d.icon,{className:"h-3 w-3"}),s.visibility==="PUBLIC"?"Công khai":s.visibility==="ORG"?"Nội bộ":"Riêng tư"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-700 dark:bg-slate-700 dark:text-slate-300",children:[e.jsx(k,{className:"h-3 w-3"}),s.questionCount," câu"]})]}),e.jsx("h3",{className:"text-base font-bold text-emerald-900 dark:text-emerald-200 truncate",children:s.name}),s.description&&e.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:p,className:"transition hover:scale-105 active:scale-95","aria-label":o?"Bỏ yêu thích":"Thêm vào yêu thích",children:o?e.jsx(q,{className:"w-5 h-5 text-red-500 fill-red-500"}):e.jsx(q,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{to:`/questions/question_bank/${s.bankId}`,className:"inline-flex items-center gap-1 rounded-lg bg-yellow-400 px-3 py-1.5 text-sm font-semibold text-emerald-950 shadow hover:brightness-105",children:"Xem"}),(m==="admin"||m==="editor")&&e.jsx(h,{to:`/questions/question_bank/${s.bankId}/edit`,className:"inline-flex items-center gap-1 rounded-lg bg-red-400 px-3 py-1.5 text-sm font-semibold text-emerald-950 shadow hover:brightness-105",children:"Sửa"})]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4 border-t border-slate-100 dark:border-slate-800 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-medium",children:"Môn:"}),e.jsx("span",{children:s.subjectName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-medium",children:"Người tạo:"}),e.jsx("span",{children:s.creatorName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[e.jsx(J,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString("vi-VN")})]})]})]})]})})}function Ae(){return e.jsx("div",{className:"grid place-items-center rounded-2xl border border-dashed border-emerald-300/40 p-10 text-center dark:border-slate-700",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"mb-2 h-8 w-48 rounded bg-emerald-200/60 dark:bg-emerald-500/20"}),e.jsx("div",{className:"mx-auto h-8 w-72 rounded bg-emerald-200/40 dark:bg-emerald-500/10"})]})})}function Le(){return e.jsx("div",{className:"grid place-items-center rounded-2xl border border-dashed border-emerald-300/40 p-10 text-center dark:border-slate-700",children:e.jsxs("div",{className:"mx-auto max-w-md",children:[e.jsxs("div",{className:"mb-2 inline-flex items-center gap-2 rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-100",children:[e.jsx(U,{className:"h-4 w-4"})," Không có kết quả phù hợp"]}),e.jsx("p",{className:"text-sm text-emerald-900/80 dark:text-slate-300/80",children:"Hãy thử từ khóa khác hoặc bỏ bớt bộ lọc."}),e.jsx("div",{className:"mt-4 flex justify-center gap-2",children:e.jsxs(h,{to:"/question_bank/create",className:"inline-flex items-center gap-2 rounded-full bg-yellow-400 px-4 py-2 text-sm font-semibold text-emerald-950 shadow hover:brightness-105",children:[e.jsx(Y,{className:"h-4 w-4"})," Thêm ngân hàng mới"]})})]})})}export{He as default};
