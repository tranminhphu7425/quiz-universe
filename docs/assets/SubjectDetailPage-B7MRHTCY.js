import{c as A,v as B,d as H,u as q,r as i,j as e,B as d,L as h,o as x,C as E,m as f,w as M}from"./index-BANXB7Eh.js";import{f as v}from"./favoriteApi-L40Dm50c.js";import{A as X}from"./arrow-left-CNc_qUDH.js";import{G as P}from"./globe-ClvoWGVs.js";import{C as U}from"./calendar-D8JZxsDy.js";import{A as y,S as G}from"./square-pen-k15AX9xg.js";import{C as K}from"./circle-check-BiM_tiBc.js";import{S as R}from"./share-2-BCX2uYmJ.js";import{B as N}from"./book-marked-CRou4nq8.js";import{F as m}from"./file-text-7W0xYtdY.js";import{C as _}from"./clock-DF5mWqil.js";const O=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],V=A("hash",O);function c({icon:s,label:l,value:a,color:t="text-emerald-600"}){return e.jsx("div",{className:"rounded-xl bg-white/50 dark:bg-slate-800/50 p-4 backdrop-blur-sm border border-slate-200/50 dark:border-slate-700/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.replace("text-","bg-")}/10`,children:e.jsx(s,{className:`h-5 w-5 ${t}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l}),e.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:a})]})]})})}function u({icon:s,label:l,onClick:a,variant:t="default"}){const b={default:"bg-slate-100 text-slate-700 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-300",primary:"bg-emerald-500 text-white hover:bg-emerald-600",danger:"bg-rose-500 text-white hover:bg-rose-600"};return e.jsxs("button",{onClick:a,className:`inline-flex items-center gap-2 rounded-lg px-4 py-2.5 font-medium transition-colors ${b[t]}`,children:[e.jsx(s,{className:"h-4 w-4"}),l]})}function ne(){const{subjectId:s}=B(),l=H(),{user:a}=q(),[t,b]=i.useState(null),[C,k]=i.useState(!0),[w,S]=i.useState(null),[g,j]=i.useState(!1),[r,T]=i.useState({totalQuestions:0,totalQuizzes:0,totalDocuments:0,avgDifficulty:"Chưa có",lastUpdated:"Chưa có"});i.useEffect(()=>{async function n(){if(s)try{k(!0);const o=await M(Number(s)),I={id:Number(s),code:`MH${s.padStart(3,"0")}`,name:o.name,description:"Môn học này cung cấp kiến thức nền tảng về lập trình và thuật toán. Bao gồm các chủ đề như cấu trúc dữ liệu, giải thuật, lập trình hướng đối tượng và các nguyên lý cơ bản của khoa học máy tính.",createdAt:"2024-01-15T08:30:00Z"};if(b(I),a)try{const p=await v.getFavoriteSubjects();j(p.some(L=>L.subjectId===Number(s)))}catch(p){console.error("Lỗi khi lấy danh sách yêu thích:",p)}T({totalQuestions:125,totalQuizzes:8,totalDocuments:15,avgDifficulty:"Trung bình",lastUpdated:"2 ngày trước"})}catch(o){S(o.message||"Không thể tải thông tin môn học"),console.error("Lỗi khi tải thông tin môn học:",o)}finally{k(!1)}}n()},[s,a]);const z=async()=>{if(!(!a||!t))try{g?(await v.removeFavoriteSubject(t.id),j(!1)):(await v.addFavoriteSubject(t.id),j(!0))}catch(n){console.error("Lỗi khi cập nhật yêu thích:",n)}},D=()=>{const n=window.location.href;navigator.clipboard.writeText(n).then(()=>{alert("Đã sao chép liên kết vào clipboard!")})},Q=()=>{t&&l(`/subject/${t.id}/edit`)},$=()=>{t&&l(`/quiz/create?subjectId=${t.id}`)},F=()=>{t&&l(`/questions/create?subjectId=${t.id}`)};return C?e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Đang tải thông tin môn học..."})]})}):w||!t?e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 rounded-full bg-rose-100 px-3 py-1 text-sm font-semibold text-rose-800 dark:bg-rose-500/20 dark:text-rose-100",children:[e.jsx(d,{className:"h-4 w-4"}),"Lỗi"]}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:w||"Môn học không tồn tại"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Không thể tìm thấy thông tin môn học bạn yêu cầu."}),e.jsxs("button",{onClick:()=>l("/subjects"),className:"inline-flex items-center gap-2 rounded-lg bg-emerald-500 px-4 py-2 font-medium text-white hover:bg-emerald-600",children:[e.jsx(X,{className:"h-4 w-4"}),"Quay lại danh sách môn học"]})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-400 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-8",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-white/80 mb-6",children:[e.jsx(h,{to:"/subjects",className:"hover:text-white transition-colors",children:"Môn học"}),e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{className:"text-white font-medium",children:t.code})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm",children:e.jsx(d,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/20 px-3 py-1 text-xs font-semibold text-white",children:[e.jsx(V,{className:"h-3 w-3"}),t.code]}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/20 px-3 py-1 text-xs font-semibold text-white",children:[e.jsx(P,{className:"h-3 w-3"}),"Công khai"]})]}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:t.name})]})]}),t.description&&e.jsx("p",{className:"text-white/90 max-w-3xl",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-6 text-white/80 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsxs("span",{children:["Ngày tạo: ",new Date(t.createdAt).toLocaleDateString("vi-VN")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:"Trạng thái: Đang hoạt động"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[a&&e.jsx("button",{onClick:z,className:`inline-flex items-center gap-2 rounded-lg px-4 py-2.5 font-medium transition-colors ${g?"bg-rose-500 text-white hover:bg-rose-600":"bg-white/20 text-white hover:bg-white/30"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4"}),"Đã yêu thích"]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4"}),"Yêu thích"]})}),e.jsx(u,{icon:R,label:"Chia sẻ",onClick:D}),(a?.role==="admin"||a?.role==="teacher")&&e.jsx(u,{icon:G,label:"Chỉnh sửa",onClick:Q,variant:"primary"})]})]})]})}),e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-8",children:e.jsxs("div",{className:"grid gap-8",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Thống kê"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{icon:N,label:"Tạo bài kiểm tra",onClick:$,variant:"primary"}),e.jsx(u,{icon:m,label:"Thêm câu hỏi",onClick:F})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(c,{icon:m,label:"Tổng câu hỏi",value:r.totalQuestions}),e.jsx(c,{icon:N,label:"Bài kiểm tra",value:r.totalQuizzes}),e.jsx(c,{icon:d,label:"Tài liệu",value:r.totalDocuments}),e.jsx(c,{icon:E,label:"Độ khó trung bình",value:r.avgDifficulty,color:"text-amber-600"}),e.jsx(c,{icon:_,label:"Cập nhật lần cuối",value:r.lastUpdated,color:"text-blue-600"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"Hành động nhanh"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(f.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"group cursor-pointer",children:e.jsxs(h,{to:`/questions?subjectId=${t.id}`,className:"block rounded-xl bg-white dark:bg-slate-800 p-6 border border-slate-200 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-500 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-emerald-100 dark:bg-emerald-500/20",children:e.jsx(m,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),e.jsx(x,{className:"h-5 w-5 text-slate-400 group-hover:text-emerald-600 transition-colors"})]}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Xem câu hỏi"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Xem tất cả ",r.totalQuestions," câu hỏi trong môn học này"]})]})}),e.jsx(f.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"group cursor-pointer",children:e.jsxs(h,{to:`/quizzes?subjectId=${t.id}`,className:"block rounded-xl bg-white dark:bg-slate-800 p-6 border border-slate-200 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-500 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-100 dark:bg-blue-500/20",children:e.jsx(N,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsx(x,{className:"h-5 w-5 text-slate-400 group-hover:text-blue-600 transition-colors"})]}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Bài kiểm tra"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Xem ",r.totalQuizzes," bài kiểm tra được tạo từ môn học này"]})]})}),e.jsx(f.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"group cursor-pointer",children:e.jsxs(h,{to:`/documents?subjectId=${t.id}`,className:"block rounded-xl bg-white dark:bg-slate-800 p-6 border border-slate-200 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-500 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-purple-100 dark:bg-purple-500/20",children:e.jsx(d,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsx(x,{className:"h-5 w-5 text-slate-400 group-hover:text-purple-600 transition-colors"})]}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Tài liệu"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Xem ",r.totalDocuments," tài liệu học tập liên quan"]})]})})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"Hoạt động gần đây"}),e.jsx("div",{className:"rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("div",{className:"p-6 text-center text-slate-500 dark:text-slate-400",children:[e.jsx(m,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Chưa có hoạt động nào gần đây"}),e.jsx("p",{className:"text-sm mt-2",children:"Các hoạt động về câu hỏi, bài kiểm tra sẽ hiển thị tại đây"})]})})]})]})})]})}export{ne as default};
